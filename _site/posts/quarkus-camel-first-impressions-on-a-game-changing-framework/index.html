<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" >
  <link rel="shortcut icon" type="image/png" href="/icon.png" />

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@koint">
  <meta name="twitter:creator" content="@koint">

  <!-- SEO stuff -->
  <title>Quarkus Camel, First Impressions on a Game Changing Framework</title>
  <meta property="og:title" content="Quarkus Camel, First Impressions on a Game Changing Framework" />
  <meta name="twitter:title" content="Quarkus Camel, First Impressions on a Game Changing Framework">


  
	  <meta name="description" content="On March 07, 2019 Red Hat & the JBoss Community announced Quarkus. It is a Java framework that enables ultra low
    boot
    times and tiny
    memory footprint for applications and services. It does that by taking advantage of GraalVM's native compilation
    capabilities to produce an executable out of your Java code. Why is this considered to be a game
    changer ?
    In this article I will give my view and first impressions on this framework as someone who spends
    a bit of time writing applications and services. I will get my hands dirty by building a
    working Quarkus + Apache Camel example." />
	  <meta property="og:description" content="On March 07, 2019 Red Hat & the JBoss Community announced Quarkus. It is a Java framework that enables ultra low
    boot
    times and tiny
    memory footprint for applications and services. It does that by taking advantage of GraalVM's native compilation
    capabilities to produce an executable out of your Java code. Why is this considered to be a game
    changer ?
    In this article I will give my view and first impressions on this framework as someone who spends
    a bit of time writing applications and services. I will get my hands dirty by building a
    working Quarkus + Apache Camel example." />
	  <meta name="twitter:description" content="On March 07, 2019 Red Hat & the JBoss Community announced Quarkus. It is a Java framework that enables ultra low
    boot
    times and tiny
    memory footprint for applications and services. It does that by taking advantage of GraalVM's native compilation
    capabilities to produce an executable out of your Java code. Why is this considered to be a game
    changer ?
    In this article I will give my view and first impressions on this framework as someone who spends
    a bit of time writing applications and services. I will get my hands dirty by building a
    working Quarkus + Apache Camel example.">
  
  <link rel="canonical" href="http://0.0.0.0:4000/posts/quarkus-camel-first-impressions-on-a-game-changing-framework/" />
  <meta property="og:url" content="http://0.0.0.0:4000/posts/quarkus-camel-first-impressions-on-a-game-changing-framework/" />
  <meta name="twitter:url" content="http://0.0.0.0:4000/posts/quarkus-camel-first-impressions-on-a-game-changing-framework/">

  <meta property="og:site_name" content="Alain's Tech Blog" />
  <meta property="og:image" content="http://0.0.0.0:4000/assets/images//posts/quarkus-camel-first-impressions-on-a-game-changing-framework/top.jpg" />
  <meta name="twitter:image" content="http://0.0.0.0:4000/assets/images//posts/quarkus-camel-first-impressions-on-a-game-changing-framework/top.jpg">

   <!-- if it's an article -->
  <meta property="og:type" content="article" />
  <meta property="article:published_time" content="2019-03-15T10:00:00+07:00" />
  <meta property="article:modified_time" content="2019-07-04T10:00:00+07:00" />

  <meta content="http://www.linkedin.com/in/alainpham" property="article:author">

  
	  
	  <meta content="development" property="article:section">
	  
  

  
	  
	  <meta content="quarkus" property="article:tag">
	  
	  <meta content="kubernetes" property="article:tag">
	  
	  <meta content="camel" property="article:tag">
	  
  

    <script type="application/ld+json">
{"@context": "http://schema.org",
"@type": "BlogPosting",
"headline": "Quarkus Camel, First Impressions on a Game Changing Framework",
"datePublished": "2019-03-15T10:00:00+07:00",
  
"description": "
    On March 07, 2019 Red Hat & the JBoss Community announced Quarkus. It is a Java framework that enables ultra low
    boot
    times and tiny
    memory footprint for applications and services. It does that by taking advantage of GraalVM's native compilation
    capabilities to produce an executable out of your Java code. Why is this considered to be a game
    changer ?
    In this article I will give my view and first impressions on this framework as someone who spends
    a bit of time writing applications and services. I will get my hands dirty by building a
    working Quarkus + Apache Camel example.



",
  
"url": "http://0.0.0.0:4000/posts/quarkus-camel-first-impressions-on-a-game-changing-framework/"}</script>

  

  <link rel="author" href="http://www.linkedin.com/in/alainpham"/>

   <!-- End SEO stuff -->

  <link rel="stylesheet" href="/assets/css/bootstrap.min.css" />
  <link rel="stylesheet" href="/assets/css/font-awesome/css/font-awesome.min.css" />
  <link rel="stylesheet" href="/assets/css/main.css" />
   <link href="/assets/css/syntax.css" rel="stylesheet">

  <script src="/assets/js/jquery.min.js"></script>
  <script src="/assets/js/bootstrap.min.js"></script>

</head>

<body>
	<div>
	<nav class="navbar navbar-default navbar-fixed-top">
		<div class="container-fluid">
			<div class="navbar-header">
				<button class="navbar-toggle collapsed" type="button"
					data-toggle="collapse" data-target="#navbar-collapse-menu">
					<span class="sr-only">Toggle navigation</span> <span
						class="icon-bar"></span> <span class="icon-bar"></span> <span
						class="icon-bar"></span>
				</button>
				<a class="navbar-brand" href="/"> <i class="fa fa-barcode"></i>
				</a>
			</div>
			<div id="navbar-collapse-menu" class="collapse navbar-collapse">
				<ul class="nav navbar-nav">

					
						<!-- If has submenues -->
						
						<li class="dropdown">
							<a class="dropdown-toggle"	data-toggle="dropdown" href="#">
								Featured Projects
								<span class="caret"></span>
							</a>
							<ul class="dropdown-menu">
								
									<li>
										<a href="/projects/microbam">
											
											MicroBam
										</a>
									</li>
								
									<li>
										<a href="/projects/ourlegacy">
											
											OurLegacy
										</a>
									</li>
								
								</ul>
							</li>
						
					
						<!-- If has submenues -->
						
							<li><a href="/">Posts</a></li>
						
					
						<!-- If has submenues -->
						
							<li><a href="/tags">Tags</a></li>
						
					
						<!-- If has submenues -->
						
							<li><a href="/about">About</a></li>
						
					
						<!-- If has submenues -->
						
						<li class="dropdown">
							<a class="dropdown-toggle"	data-toggle="dropdown" href="#">
								Follow me
								<span class="caret"></span>
							</a>
							<ul class="dropdown-menu">
								
									<li>
										<a href="http://github.com/alainpham">
											
											<i class="fa fa-inverse fa-github fa-2x"></i>
											
											GitHub
										</a>
									</li>
								
									<li>
										<a href="http://www.linkedin.com/in/alainpham">
											
											<i class="fa fa-inverse fa-linkedin-square fa-2x"></i>
											
											LinkedIn
										</a>
									</li>
								
									<li>
										<a href="https://twitter.com/koint">
											
											<i class="fa fa-inverse fa-twitter fa-2x"></i>
											
											Twitter
										</a>
									</li>
								
								</ul>
							</li>
						
					
				</ul>
			</div>
		</div>
	</nav>
		
		<img
			alt="Quarkus Camel, First Impressions on a Game Changing Framework"
			src="/assets/images//posts/quarkus-camel-first-impressions-on-a-game-changing-framework/top.jpg" class="img-responsive">
		

	<div class="jumbotron  clearfix">

		<h1 class="text-center">Quarkus Camel, First Impressions on a Game Changing Framework</h1>

	</div>
</div>

	<div class="container">

	
	<p>
		<strong>March 15, 2019</strong> ( last updated : July 04, 2019 )
		<br>
		
			<a class="label label-default" href="/tags/#quarkus">quarkus</a>
		
			<a class="label label-default" href="/tags/#kubernetes">kubernetes</a>
		
			<a class="label label-default" href="/tags/#camel">camel</a>
		
    </p>
	
	<p>
    	<a href="https://github.com/alainpham/quarkus-camel-first-impressions" class="btn btn-default">
		    <i class="fa fa-github fa-2x"></i>  https://github.com/alainpham/quarkus-camel-first-impressions
			</a>
	</p>
	
	<hr>
	<h1>Abstract</h1>
	

	<p>
    On March 07, 2019 Red Hat & the JBoss Community announced Quarkus. It is a Java framework that enables ultra low
    boot
    times and tiny
    memory footprint for applications and services. It does that by taking advantage of GraalVM's native compilation
    capabilities to produce an executable out of your Java code. Why is this considered to be a game
    changer ?
    In this article I will give my view and first impressions on this framework as someone who spends
    a bit of time writing applications and services. I will get my hands dirty by building a
    working Quarkus + Apache Camel example.
</p>
<!--more-->

<h2>What's the big deal about Quarkus?</h2>

<p>When Quarkus was announced 1 week ago, many have commented that this is a game changer for the future of
    Java Application
    Development. I must say that I have rarely been so excited about a project as I am right now for Quarkus !
    So what's the big deal here ?
</p>

<p> The official website quarkus.io states that Quarkus can be qualified as "Supersonic Subatomic Java". It is a "A
    Kubernetes Native Java stack tailored for GraalVM & OpenJDK HotSpot, crafted from the best of breed Java libraries
    and standards".
</p>

<h3>The existing Java ecosystem</h3>
<p>
    To understand the huge value that Quarkus brings, we have to take a step back and get in the shoes of a typical
    Enterprise Dev Team.
    Java has been so broadly adopted that it has become the default technology for application
    development in
    many organizations.
    Throughout the years a huge ecosystem of tools and libraries flourished around Java to solve all kinds
    of challenges and problems.
</p>

<h3>The adoption of containers combined with Java</h3>

<p>
    The recent adoption of Containers and Kubernetes has lead to a wave of
    innovation around workload orchestration and scheduling.
    Still, organizations wanted to keep leveraging the expertise around Java their developers have acquired.
    It became a natural practice to put Java applications and micro services into containers to get the best of both
    worlds. Organizations wanted a rich ecosystem
    of libraries and all the innovations around container orchestration at the same time.
</p>

<p>
<a href="/assets/images//posts/quarkus-camel-first-impressions-on-a-game-changing-framework/os-container-jvm-app-stack.svg"> <img
	class="center-block img-responsive"
	src="/assets/images//posts/quarkus-camel-first-impressions-on-a-game-changing-framework/os-container-jvm-app-stack.svg" alt="os container jvm app stack"/></a>

</p>
<h3>The paradigm shift needed for Java to exist in the world of Containers</h3>


<p>
    When a micro service needs to be scaled up and down quickly is when Java shows some weakness.
    In fact Java has not been designed for being a short lived process that might be scheduled anywhere on a
    distributed infrastructure.
    It has rather been designed and optimized to run application servers for a long time and taking up all the
    resources
    available on a VM or a bare metal server.
    The boot time was not such a critical constraint. In usual Java application the boot time of 4 to 10 seconds
    (and even more) was
    entirely acceptable. The initial memory footprint is usually also negligible due to the fact that a large amount of memory 
    would be dedicated to the application server anyway.
</p>

<p>
    The paradigm has shifted in the world of containers and Kubernetes. The boot time has become highly critical. A low boot time 
    is what would allow a service to scale up and down quickly and achieve higher
    workload density on cloud infrastructures. A minimal initial memory footprint per instance is what would
    allow the service to start small and be scaled efficiently when needed.
    In the extreme case, when considering the rise of Functions as a Service booting up quickly becomes even more critical. 
    In this case we aim at scaling the service down to zero instances when there are no requests and starting
    it only when client requests are coming in.
    We can see here that the boot time needs to be several orders of magnitude lower than what we are used to.
</p>

<p>
    <a href="/assets/images//posts/quarkus-camel-first-impressions-on-a-game-changing-framework/scaling-up.svg"> <img
        class="center-block img-responsive"
        src="/assets/images//posts/quarkus-camel-first-impressions-on-a-game-changing-framework/scaling-up.svg" alt="scaling up from 0"/></a>
    </p>

<h3>Quarkus to the rescue</h3>
<p>
    Given this context, we can now better understand the value that Quarkus brings.
    In short, it's a framework that enables dev teams to use widely adopted Java libraries to build applications that
    have an extreme low boot time and low initial memory footprint.
    Quarkus takes advantage of GraalVM to compile java projects into a native executable that can just run.
</p>

<h2>Get started : build a hello world</h2>
<p>Now lets go ahead and build our first hello world to see how it performs.</p>
<h3>
    Create a simple project using the quarkus-maven-plugin
</h3>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell">mvn io.quarkus:quarkus-maven-plugin:0.11.0:create <span class="se">\</span>
<span class="nt">-DprojectGroupId</span><span class="o">=</span>techlab <span class="se">\</span>
<span class="nt">-DprojectArtifactId</span><span class="o">=</span>quarkus-hello-world <span class="se">\</span>
<span class="nt">-DclassName</span><span class="o">=</span><span class="s2">"techlab.GreetingResource"</span> <span class="se">\</span>
<span class="nt">-Dpath</span><span class="o">=</span><span class="s2">"/hello"</span></code></pre></figure>

<p>
    This is the structure of the project :
</p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell">|-- pom.xml
|-- quarkus.log
|-- src
| |-- main
| | |-- docker
| | | <span class="sb">`</span><span class="nt">--</span> Dockerfile
| | |-- java
| | | <span class="sb">`</span><span class="nt">--</span> techlab
| | | <span class="sb">`</span><span class="nt">--</span> GreetingResource.java
| | <span class="sb">`</span><span class="nt">--</span> resources
| | <span class="sb">`</span><span class="nt">--</span> META-INF
| | |-- microprofile-config.properties
| | <span class="sb">`</span><span class="nt">--</span> resources
| | <span class="sb">`</span><span class="nt">--</span> index.html</code></pre></figure>

<p>
    The dependencies are pretty minimalist and clean since most of it is taken care of by the quarkus bom and plugins.
</p>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;dependencyManagement&gt;</span>
    <span class="nt">&lt;dependencies&gt;</span>
        <span class="nt">&lt;dependency&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>io.quarkus<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>quarkus-bom<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;version&gt;</span>${quarkus.version}<span class="nt">&lt;/version&gt;</span>
        <span class="nt">&lt;type&gt;</span>pom<span class="nt">&lt;/type&gt;</span>
        <span class="nt">&lt;scope&gt;</span>import<span class="nt">&lt;/scope&gt;</span>
        <span class="nt">&lt;/dependency&gt;</span>
    <span class="nt">&lt;/dependencies&gt;</span>
<span class="nt">&lt;/dependencyManagement&gt;</span>
....
<span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>io.quarkus<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>quarkus-resteasy<span class="nt">&lt;/artifactId&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
<span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>io.quarkus<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>quarkus-arc<span class="nt">&lt;/artifactId&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
...
<span class="nt">&lt;build&gt;</span>
    <span class="nt">&lt;plugins&gt;</span>
        <span class="nt">&lt;plugin&gt;</span>
            <span class="nt">&lt;groupId&gt;</span>io.quarkus<span class="nt">&lt;/groupId&gt;</span>
            <span class="nt">&lt;artifactId&gt;</span>quarkus-maven-plugin<span class="nt">&lt;/artifactId&gt;</span>
            <span class="nt">&lt;version&gt;</span>${quarkus.version}<span class="nt">&lt;/version&gt;</span>
...</code></pre></figure>


<p>
    The plugin creates a simple project with a rest service operation returning hello as you can see in the file
    GreetingResource.java.
    It is pretty much the only thing that needs to be done here to have a running service. Quarkus is rather an
    opinionated framework that aims at accelerating development using configuration files and annotations.
</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kn">package</span> <span class="nn">techlab</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">javax.ws.rs.GET</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.ws.rs.Path</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.ws.rs.Produces</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.ws.rs.core.MediaType</span><span class="o">;</span>

<span class="nd">@Path</span><span class="o">(</span><span class="s">"/hello"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GreetingResource</span> <span class="o">{</span>

<span class="nd">@GET</span>
<span class="nd">@Produces</span><span class="o">(</span><span class="nc">MediaType</span><span class="o">.</span><span class="na">TEXT_PLAIN</span><span class="o">)</span>
<span class="kd">public</span> <span class="nc">String</span> <span class="nf">hello</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="s">"hello"</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<h3>Let's run and test the project</h3>

<p>
    Now lets go ahead and run this project to see how fast it actually boots up.
</p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell">mvn compile quarkus:dev</code></pre></figure>


<figure class="highlight"><pre><code class="language-shell" data-lang="shell"><span class="o">[</span>apham@aplinux quarkus-hello-world]<span class="nv">$ </span>mvn compile quarkus:dev
<span class="o">[</span>INFO] Scanning <span class="k">for </span>projects...
<span class="o">[</span>INFO]
<span class="o">[</span>INFO] <span class="nt">------------------------------------------------------------------------</span>
<span class="o">[</span>INFO] Building quarkus-hello-world 1.0-SNAPSHOT
<span class="o">[</span>INFO] <span class="nt">------------------------------------------------------------------------</span>
<span class="o">[</span>INFO]
<span class="o">[</span>INFO] <span class="nt">---</span> maven-resources-plugin:2.6:resources <span class="o">(</span>default-resources<span class="o">)</span> @ quarkus-hello-world <span class="nt">---</span>
<span class="o">[</span>INFO] Using <span class="s1">'UTF-8'</span> encoding to copy filtered resources.
<span class="o">[</span>INFO] Copying 2 resources
<span class="o">[</span>INFO]
<span class="o">[</span>INFO] <span class="nt">---</span> maven-compiler-plugin:3.1:compile <span class="o">(</span>default-compile<span class="o">)</span> @ quarkus-hello-world <span class="nt">---</span>
<span class="o">[</span>INFO] Nothing to compile - all classes are up to <span class="nb">date</span>
<span class="o">[</span>INFO]
<span class="o">[</span>INFO] <span class="nt">---</span> quarkus-maven-plugin:0.11.0:dev <span class="o">(</span>default-cli<span class="o">)</span> @ quarkus-hello-world <span class="nt">---</span>
<span class="o">[</span>INFO] Using servlet resources /home/workdrive/TAZONE/WORKSPACES/ws-quarkus/quarkus-hello-world/src/main/resources/META-INF/resources
Listening <span class="k">for </span>transport dt_socket at address: 5005
2019-03-17 23:10:29,640 INFO  <span class="o">[</span>io.qua.dep.QuarkusAugmentor] <span class="o">(</span>main<span class="o">)</span> Beginning quarkus augmentation
2019-03-17 23:10:29,980 INFO  <span class="o">[</span>io.qua.dep.QuarkusAugmentor] <span class="o">(</span>main<span class="o">)</span> Quarkus augmentation completed <span class="k">in </span>340ms
2019-03-17 23:10:30,155 INFO  <span class="o">[</span>io.quarkus] <span class="o">(</span>main<span class="o">)</span> Quarkus 0.11.0 started <span class="k">in </span>0.602s. Listening on: http://127.0.0.1:8080
2019-03-17 23:10:30,156 INFO  <span class="o">[</span>io.quarkus] <span class="o">(</span>main<span class="o">)</span> Installed features: <span class="o">[</span>cdi, resteasy]</code></pre></figure>

<p>
    We should bare in mind that here we are using the OpenJDK HotSpot and are not yet compiling our project to a native executable.
    The results are already pretty remarkable as I could observe a boot time of 60.2 milliseconds.
</p>

<h3>
    Compile to native executable and run
</h3>

<p>
    In order to compile the project we need to setup GraalVM. 
    Download the VM from the following website <a href="http://www.graalvm.org/downloads/">http://www.graalvm.org/downloads/</a>.
    Extract the package somewhere and set the env variable GRAALVM_HOME to point to the root of its folder.
</p>
<p>
    Now we can run the following command to build a native executable.
</p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell">mvn package <span class="nt">-Pnative</span></code></pre></figure>

<p>
    We run the native executable with the following command.
</p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell">./target/quarkus-hello-world-1.0-SNAPSHOT-runner</code></pre></figure>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell"><span class="o">[</span>apham@aplinux quarkus-hello-world]<span class="nv">$ </span>./target/quarkus-hello-world-1.0-SNAPSHOT-runner
2019-03-17 23:34:04,690 INFO <span class="o">[</span>io.quarkus] <span class="o">(</span>main<span class="o">)</span> Quarkus 0.11.0 started <span class="k">in </span>0.004s. Listening on: http://127.0.0.1:8080
2019-03-17 23:34:04,691 INFO <span class="o">[</span>io.quarkus] <span class="o">(</span>main<span class="o">)</span> Installed features: <span class="o">[</span>cdi, resteasy]</code></pre></figure>

<p>
    We can observe here that the boot time is enhanced by a significant order of magnitude which is just a fraction of a millisecond. 
    To be precise 0.4 milliseconds. This is simply an incredible result.
</p>

<h2>Enhanced Developer Experience</h2>
<p>
    Now the good surprises don't end there. Since the boot times are so good, it also solve a big challenge for development workflow. 
    In fact, Quarkus also implements a livereload mechanism to reflect the changes performed on the code instantaneously.
    Try to change some of the code in the project, hit Ctrl+s and we can observe how fast the service reloads to take the changes into account.
    This is a big leap for developer productivity. As we can see here it took only 38.6 milliseconds to reload.
</p>
<figure class="highlight"><pre><code class="language-shell" data-lang="shell">2019-03-18 09:59:58,988 INFO  <span class="o">[</span>io.qua.dev] <span class="o">(</span>XNIO-1 task-1<span class="o">)</span> Changes <span class="nb">source </span>files detected, recompiling <span class="o">[</span>/home/workdrive/TAZONE/WORKSPACES/ws-quarkus/quarkus-camel-first-impressions/src/main/java/techlab/GreetingResource.java]
2019-03-18 09:59:59,274 INFO  <span class="o">[</span>io.quarkus] <span class="o">(</span>XNIO-1 task-1<span class="o">)</span> Quarkus stopped <span class="k">in </span>0.001s
2019-03-18 09:59:59,275 INFO  <span class="o">[</span>io.qua.dep.QuarkusAugmentor] <span class="o">(</span>XNIO-1 task-1<span class="o">)</span> Beginning quarkus augmentation
2019-03-18 09:59:59,366 INFO  <span class="o">[</span>io.qua.dep.QuarkusAugmentor] <span class="o">(</span>XNIO-1 task-1<span class="o">)</span> Quarkus augmentation completed <span class="k">in </span>91ms
2019-03-18 09:59:59,373 INFO  <span class="o">[</span>io.quarkus] <span class="o">(</span>XNIO-1 task-1<span class="o">)</span> Quarkus 0.11.0 started <span class="k">in </span>0.098s. Listening on: http://127.0.0.1:8080
2019-03-18 09:59:59,373 INFO  <span class="o">[</span>io.quarkus] <span class="o">(</span>XNIO-1 task-1<span class="o">)</span> Installed features: <span class="o">[</span>cdi, resteasy]
2019-03-18 09:59:59,373 INFO  <span class="o">[</span>io.qua.dev] <span class="o">(</span>XNIO-1 task-1<span class="o">)</span> Hot replace total <span class="nb">time</span>: 0.386s</code></pre></figure>

<h2>Let's add Camel to the mix</h2>
<p>Now that we have our hello world running. Let's try to add Camel to the mix to enable reusable integration patterns
    and connectors in our projects. Quarkus already offers a variety extensions and Camel is one of those. At the time of writing 
    there are just a few extensions available. We won't get the whole set of 200+ Camel components compiled to native executable packages, 
    but I'm quite sure that the Quarkus ecosystem will grow quickly.
</p>

<p>
    Let's list the available extensions.
</p>

<pre>mvn quarkus:list-extensions</pre>
<p>
    Then let's add the camel extension to it.
</p>
<pre>mvn quarkus:add-extension -Dextensions=io.quarkus:quarkus-camel-core</pre>

<p>
    As a result you should see the dependency to the quarkus camel extension being added to the pom file
</p>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>io.quarkus<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>quarkus-camel-core<span class="nt">&lt;/artifactId&gt;</span>
<span class="nt">&lt;/dependency&gt;</span></code></pre></figure>

<p>
    Lets create a simple class containing a Camel route to see if things work. Add a new class called CamelRouteBuilder to the source folder.
    With the following content.
</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kn">package</span> <span class="nn">techlab</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.apache.camel.builder.RouteBuilder</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">CamelRouteBuilder</span> <span class="kd">extends</span> <span class="nc">RouteBuilder</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">configure</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">from</span><span class="o">(</span><span class="s">"timer://testTimer"</span><span class="o">).</span><span class="na">log</span><span class="o">(</span><span class="s">"test"</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<p>At the time of writing there is no documentation on how to get started with camel in Quarkus. 
    I found an error just trying to run this class complaining about properties not being available.</p>
<pre>Property with key [camel.defer] not found</pre>

<p>Searching through the source code I found that it is looking some properties in the application.properties file.
    The one file of interest can be found <a href="https://github.com/quarkusio/quarkus/blob/0.11.0/extensions/camel/camel-core/runtime/src/main/java/io/quarkus/camel/core/runtime/CamelRuntime.java">here </a>
</p>

<p><strong>Update July 4, 2019 : As of today, version 0.18 is out now the camel core plugin has changed and does not require to add those properties anymore</strong><p>

<p>
    So lets go ahead and create a file named application.properties in the folder src/main/resources with the following content
</p>

<pre>
camel.defer=false
camel.conf=
camel.confd=
camel.routesUri=
camel.dump=false
</pre>

<p>Now we can run our project with <pre>mvn compile quarkus:dev</pre></p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">18</span> <span class="mi">10</span><span class="o">:</span><span class="mi">43</span><span class="o">:</span><span class="mi">27</span><span class="o">,</span><span class="mi">702</span> <span class="no">INFO</span>  <span class="o">[</span><span class="n">io</span><span class="o">.</span><span class="na">qua</span><span class="o">.</span><span class="na">cam</span><span class="o">.</span><span class="na">cor</span><span class="o">.</span><span class="na">run</span><span class="o">.</span><span class="na">FastCamelContext</span><span class="o">]</span> <span class="o">(</span><span class="n">main</span><span class="o">)</span> <span class="nl">Route:</span> <span class="n">route1</span> <span class="n">started</span> <span class="n">and</span> <span class="n">consuming</span> <span class="nl">from:</span> <span class="nl">timer:</span><span class="c1">//testTimer</span>
<span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">18</span> <span class="mi">10</span><span class="o">:</span><span class="mi">43</span><span class="o">:</span><span class="mi">27</span><span class="o">,</span><span class="mi">771</span> <span class="no">INFO</span>  <span class="o">[</span><span class="n">io</span><span class="o">.</span><span class="na">quarkus</span><span class="o">]</span> <span class="o">(</span><span class="n">main</span><span class="o">)</span> <span class="nc">Quarkus</span> <span class="mf">0.11</span><span class="o">.</span><span class="mi">0</span> <span class="n">started</span> <span class="n">in</span> <span class="mf">1.509</span><span class="n">s</span><span class="o">.</span> <span class="nc">Listening</span> <span class="nl">on:</span> <span class="nl">http:</span><span class="c1">//127.0.0.1:8080</span>
<span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">18</span> <span class="mi">10</span><span class="o">:</span><span class="mi">43</span><span class="o">:</span><span class="mi">27</span><span class="o">,</span><span class="mi">771</span> <span class="no">INFO</span>  <span class="o">[</span><span class="n">io</span><span class="o">.</span><span class="na">quarkus</span><span class="o">]</span> <span class="o">(</span><span class="n">main</span><span class="o">)</span> <span class="nc">Installed</span> <span class="nl">features:</span> <span class="o">[</span><span class="n">camel</span><span class="o">-</span><span class="n">core</span><span class="o">,</span> <span class="n">cdi</span><span class="o">,</span> <span class="n">resteasy</span><span class="o">]</span>
<span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">18</span> <span class="mi">10</span><span class="o">:</span><span class="mi">43</span><span class="o">:</span><span class="mi">28</span><span class="o">,</span><span class="mi">720</span> <span class="no">INFO</span>  <span class="o">[</span><span class="n">route1</span><span class="o">]</span> <span class="o">(</span><span class="nc">Camel</span> <span class="o">(</span><span class="n">camel</span><span class="o">-</span><span class="mi">1</span><span class="o">)</span> <span class="n">thread</span> <span class="err">#</span><span class="mi">1</span> <span class="o">-</span> <span class="nl">timer:</span><span class="c1">//testTimer) test</span>
<span class="mi">2019</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">18</span> <span class="mi">10</span><span class="o">:</span><span class="mi">43</span><span class="o">:</span><span class="mi">29</span><span class="o">,</span><span class="mi">703</span> <span class="no">INFO</span>  <span class="o">[</span><span class="n">route1</span><span class="o">]</span> <span class="o">(</span><span class="nc">Camel</span> <span class="o">(</span><span class="n">camel</span><span class="o">-</span><span class="mi">1</span><span class="o">)</span> <span class="n">thread</span> <span class="err">#</span><span class="mi">1</span> <span class="o">-</span> <span class="nl">timer:</span><span class="c1">//testTimer) test</span></code></pre></figure>
<p>
    We can note that the boot time is a bit higher when including camel, it is now 1.509s.
</p>

<p>Let's compile it to a native executable and see how it behaves.</p>

<pre> 
mvn package -Pnative
/target/quarkus-camel-first-impressions-1.0-SNAPSHOT-runner
</pre>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell">2019-03-18 11:05:57,835 INFO  <span class="o">[</span>io.qua.cam.cor.run.FastCamelContext] <span class="o">(</span>main<span class="o">)</span> Route: route1 started and consuming from: timer://testTimer
2019-03-18 11:05:57,838 INFO  <span class="o">[</span>io.quarkus] <span class="o">(</span>main<span class="o">)</span> Quarkus 0.11.0 started <span class="k">in </span>0.007s. Listening on: http://127.0.0.1:8080
2019-03-18 11:05:57,838 INFO  <span class="o">[</span>io.quarkus] <span class="o">(</span>main<span class="o">)</span> Installed features: <span class="o">[</span>camel-core, cdi, resteasy]
2019-03-18 11:05:58,835 INFO  <span class="o">[</span>route1] <span class="o">(</span>Camel <span class="o">(</span>camel-1<span class="o">)</span> thread <span class="c">#0 - timer://testTimer) test</span></code></pre></figure>

<p>We can see that the boot time is a fraction of a millisecond, 0.7 milliseconds which is absolutely amazing!</p>

<h2>
    In summary, why is Quarkus so amazing ?
</h2>

<ul>
    <li>Lower boot times with significant orders of magnitude.</li>
    <li>Puts Java Applications back into the game for efficient scale up in Cloud environments</li>
    <li>Puts Java Applications back into the game for Functions as a Service, being able to scale down to zero and boot
        up only when required</li>
    <li>Amazing Developer experience and productivity through fast "Live Reload" capabilities</li>
</ul>

<p><strong>Other resources</strong></p>
<ul>
    <li>
        <a href="https://quarkus.io/guides/">Quarkus guides</a>
    </li>
    <li><a href="https://developers.redhat.com/blog/2019/03/07/quarkus-next-generation-kubernetes-native-java-framework/">Introducing
            Quarkus: a next-generation Kubernetes native Java framework</a></li>
    <li><a href="http://in.relation.to/2019/03/08/why-quarkus/">Why Quarkus, blog article by Emmanuel Bernard</a></li>
</ul>




	
	<p>Originally published March 15, 2019
    <br> Latest update July 04, 2019</p>

    <p><strong>Related posts :</strong></p>
        <ul>
	    
			  
			  
			  <li>
			      <a href="/posts/quarkus-kafka-camel-servlet-wiring-it-together/">
			        Quarkus, Kafka, Camel Servlet, Wiring it Together
			      </a>
			  </li>
			  
		
			  
			  
			  
			  
			  
			  
			  
		
			  
			  
			  
			  
			  
			  
			  
		
			  
			  
			  
			  
			  
			  
			  
		
			  
			  
			  
			  
			  
			  
			  
		
			  
			  
			  
			  
			  
			  
			  <li>
			      <a href="/posts/handling-large-streams-of-data-through-http-with-jboss-fuse/">
			        Handling Large Streams of Data through HTTP with JBoss Fuse
			      </a>
			  </li>
			  
		
			  
			  
			  
			  
			  
			  
			  
		
			  
			  
			  
			  
			  
			  
			  
		
			  
			  
			  
			  
			  
			  
			  
		
		</ul>
	

	
	
<div id="disqus_thread"></div>
<script>

/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/

var disqus_config = function () {
this.page.url = "https://alainpham.github.io/posts/quarkus-camel-first-impressions-on-a-game-changing-framework/";  // Replace PAGE_URL with your page's canonical URL variable
//this.page.identifier = "/posts/quarkus-camel-first-impressions-on-a-game-changing-framework"; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};

(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = '//apham.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
 
	</div>
	<footer class="footer">
	<ul class="footer-links">
		<li><a href="http://github.com/alainpham"> <i
				class="fa fa-inverse fa-github fa-3x"></i></a></li>
		<li><a href="http://www.linkedin.com/in/alainpham"> <i
				class="fa fa-inverse fa-linkedin-square fa-3x"></i></a></li>
		<li><a href="https://twitter.com/koint"> <i
				class="fa fa-inverse fa-twitter fa-3x"></i></a></li>
	</ul>
</footer>
	<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', '', 'auto');
  ga('send', 'pageview');

</script>
</body>
</html>
